
--- Container Security ---

• What Are Containers
• Containers vs VMs
• Applications at Scale
• Docker
• Escape Attack & Sockets


-- What Are Containers --

To understand what a container is, we first need to understand the problem it fixes. Put plainly, modern applications can be quite complex:

• Installation: Depending on the environment the application is being installed in, it’s not uncommon to run into “configuration quirks” which make the process time-consuming and frustrating. 
• Troubleshooting: When an application stops working, a lot of time can be wasted determining if it is a problem with the application itself or a problem with the environment it is running in.
• Conflicts: Sometimes multiple versions of an application need to be run, or perhaps multiple applications which need (for example) different versions of Python to be installed. This can sometimes lead to conflicts, complicating the process further.

Containerisation solves these problems by packing applications, along with their dependencies, in one isolated environment. This package is known as a container. 
In addition to solving all the above problems, containerisation also offers further benefits. One key benefit is how lightweight they are.


-- Containers vs VMs --

A virtual machine runs on a hypervisor (software that emulates and manages multiple operating systems on one physical host). It includes a full guest OS, making it heavier but fully isolated. 
Containers share the host OS kernel, isolating only applications and their dependencies, which makes them lightweight and fast to start. 

Virtual machines are ideal for running multiple different operating systems or legacy applications, while containers excel at deploying scalable, portable micro-services.


======================== MACHINE VIRTUALIZATION ======================

        +---------+        +---------+        +---------+
        |  App1   |        |  App2   |        |  App3   |
        +---------+        +---------+        +---------+
        | Bins/Lib|        | Bins/Lib|        | Bins/Lib|
        +---------+        +---------+        +---------+
        | GuestOS |        | GuestOS |        | GuestOS |
        +---------+        +---------+        +---------+

-----------------------------------------------------------------------
                         Hypervisor
-----------------------------------------------------------------------
                         Infrastructure
=======================================================================



============================== CONTAINERS ==============================

 +-------------------+   +-------------------+   +-------------------+
 |       App1        |   |       App2        |   |       App3        |
 |     Bins/Lib      |   |     Bins/Lib      |   |     Bins/Lib      |
 |   (Dev / Test)    |   |    (Staging)      |   |     (Prod)        |
  +-------------------+   +-------------------+   +-------------------+

-------------------------------------------------------------------------
                        Container Engine
-------------------------------------------------------------------------
                        Operating System
-------------------------------------------------------------------------
                        Infrastructure
==========================================================================



-- Applications at Scale --

Microservices are a switch in the style of application architecture, where before it was a lot more common to deploy apps in a monolithic fashion (built as a single unit, a single code base, usually as a single executable ), more and more companies are choosing to break down their application into parts based on business function. 
This way, if a specific part of their application receives high traffic loads, they can scale that part without having to scale the entire application. 
This is where the lightweight nature of containers comes into play, making them incredibly easy to scale to meet increasing demands. 

A container engine is software that builds, runs, and manages containers by leveraging the host system’s OS kernel features like namespaces and cgroups. One example of a container engine is Docker.

Docker is a popular container engine that uses Dockerfiles, simple text scripts defining app environments and dependencies, to build, package, and run applications consistently across different systems. 


-- Docker --

Docker is an open-source platform for developers to build, deploy, and manage containers. Containers are executable units of software which package and manage the software and components to run a service. 
They are pretty lightweight because they isolate the application and use the host OS kernel.


-- Escape Attack & Sockets --

A container escape is a technique that enables code running inside a container to obtain rights or execute on the host kernel (or other containers) beyond its isolated environment (escaping). 
For example, creating a privileged container with access to the public internet from a test container with no internet access. 

Containers use a client-server setup on the host. The CLI tools act as the client, sending requests to the container daemon, which handles the actual container management and execution. 
The runtime exposes an API server via Unix sockets (runtime sockets) to handle CLI and daemon traffic. 
If an attacker can communicate with that socket from inside the container, they can exploit the runtime (this is how we would create the privileged container with internet access).



*






















