--- Network Fundamentals ---

● Introduction to Network Fundamentals
● Types of Networks
● Network Topologies
● OSI Reference Model
● Network Devices
● TCP/IP Model
● IP Addressing Mechanism
● Network Address Translation 
● Basic Concepts
● Virtual Local Area Network (VLAN)
● Virtual Private Network (VPN)
● Network Protocols
● OSI Reference Model
● Media Access Control (MAC) Address
● Address Resolution Protocol (ARP)
● Internet Protocol (IP)
● Internet Control Message Protocol (ICMP)
● Routing

-- Introduction to Network Fundamentals --

What is Computer Network?
People and digital devices are entities that communicate with each other among themselves. Just as people have a circle, devices in the digital world have a circle. 
This environment created by the devices in the digital world is called "Computer Network". In other words, the structure in which at least two devices communicate with each other can be called "Computer Network". 

Purposes of Computer Networks
Computer networks have become usable for many different purposes with the developing technology. The main uses of computer networks are as follows: 

1. Providing image and sound transfer (Chat and online meetings)
2. Hardware sharing (Printer sharing)
3. File, data and information sharing
4. Software sharing
5. Central management
6. Support

ARPANET and Internet
The Internet has gone through many development processes from the past to the present. When it first appeared, it was not as common and large as it is used today. The mass that could be used was very limited and was mostly used for military purposes. The Advanced Research Projects Agency Network (ARPANET) is a computer network considered the foundation of the internet. The basis of Internet technologies are the technologies used in ARPANET. In 1969, ARPANET was connected to three university networks in the USA, creating a computer network. Later, this structure expanded and grew even more. 
This network, which has spread over a wider geographical area, has come to the present day and created the Internet. 


-- Types of Networks --
Computer networks are geographically divided into many groups according to their size. There may be large networks with millions of devices in them and small networks consisting of 2-3 devices. 

Personal Area Network (PAN)
Personal Area Network (PAN) refers to networks with a minimal and small number of devices that cover very short distances (for example, up to 10 meters). For example, a mobile device and a wireless headset connected via Bluetooth are examples of this type of network. There are only 2 devices in this small network: A mobile device and a wireless headset.

Local Area Network (LAN)
Local Area Network (LAN) has a larger area than PAN. The number of devices in it can be much more. It is the most commonly used and found network type. Sometimes a network with 2 devices can also be called a LAN. The fact that it supports much more than 2 devices in terms of capacity and is geographically spread over a wider area indicates that it is a LAN-type network. For example, home networks and shared networks within the building can be given as examples of LAN. 

Metropolitan Area Network (MAN)
The Metropolitan Area Network (MAN) is a geographically city-sized computer network in which many LAN computer networks are interconnected. It connects networks with fiber optic cabling.

Wide Area Network (WAN)
Wide Area Network (WAN) is the computer network with the largest geographical area among computer networks. This computer network is so large that it can even contain continents. It hosts all other computer networks within it. An example of this computer network is the "Internet". The following address can be used to see the intercontinental fiber-optic infrastructures around the world: 
Submarine Cable Map: submarinecablemap.com

Campus Area Network (CAN)
Campus Area Network (CAN) is a computer network that is geographically smaller than MAN and larger than LAN. This computer network can contain several LANs. Usually, the computer networks of universities, institutions, or private companies are given as an example of this computer network. 


-- Network Topologies --

Network topology is a visual map to understand the physical or logical structure of a computer network. The locations of the devices and cables in the network are among the factors that determine the network topology. There are many benefits to having a network topology. For example, it is possible to see which other device(s) in the network will be affected if a device on the network fails to perform its task. If we are looking at a network topology of a large network, it is possible to see the subnets in the network and the devices it is connected to. 

Network topology is divided into 2 types
● Physical Topology
● Logical Topology

Physical Topology
It is a type of topology in which all devices and components in the network are drawn in terms of their exact locations. Looking at this topology, it is seen which cabling is made over which paths and devices. What is seen in the drawing has a physical counterpart. For example, if there is a network device in the path from device A to device B, this device is seen in the physical topology. 

Logical Topology
It does not show the exact location of the devices in the topology like physical topology. It often contains fewer elements than physical topology. Because data flow is important in logical topology. For example, data going from device A to device B may not be included in the topology if it passes over device C between device A and device B, and device C has no effect on the data that would need to be displayed on it. In this topology, it is the path of the data flow that is desired to be emphasized rather than the physical placement of the devices.

Ring Topology
It works in a closed loop logic. The sent data travels around the ring in one direction until it reaches the destination. Each node passes the incoming data over it and ensures that it reaches the target. There is no hierarchical relationship between nodes. 

Star Topology
Each node in the Star topology is connected to a central node. All data flow is done through the central node. Star topology is one of the most common computer network topologies. 

Mesh Topology
It is a network topology where there is no central node and each node can be directly connected to the other. Mesh topology is not a suitable topology for large networks. It is divided into 2 types: 

Full-Mesh
In the Full-Mesh topology, each node in the network is connected to all other nodes by cabling separately. In this topology, it is unlikely that the connection between two nodes will be broken. Because there are alternative ways of connecting. 

Partial-Mesh
In the Partial-Mesh topology, although each node is not directly connected to all other nodes, they are largely interconnected. Just like in Full-Mesh topology, there are alternative ways to reach the target node in case of disconnection.

Bus Topology
Bus topology is a topology where nodes are located on a common path and data transmission is made with a bidirectional connection on this path. In the bus topology, each node receives every transmitted data even if it does not belong to it. Since there is no hierarchical order among the nodes, there is no transmission priority. 

Point-to-Point Topology
Point-to-point topology is the simplest topology and consists of two nodes connected together. For example, a passing call between two phones creates a point-to-point topology, or a direct connection between two computers creates a point-to-point topology. 

Tree Topology
Tree topology is a hybrid network topology formed by connecting star and bus topology. Tree topology has a hierarchical order and each node can have any number of subnodes. 


-- OSI Reference Model --

What is the OSI Reference Model?
The Open Systems Interconnection (OSI) reference model was developed by ISO (International Organization of Standardization) in 1978. The OSI model is a model created to enable communication between different operating systems. With this model, it has become easier to understand network structures. It is a reference quality and has a layered architecture. Each layer in the OSI model has separate tasks. There is a hierarchical order between these layers and each layer serves the next layer. The number of layers in the OSI model is 7. 
Data transmission is carried out through these layers and the data is transmitted to the user. 

1.Physical Layer
The physical layer is the first layer in the OSI model. In this layer, data is transmitted in bits along the communication channels. Since the physical layer is only responsible for the transmission of data, it does not have any information about the type of data it transmits and what it is. The data for this layer consists of ordered bit sequences. 

2.Datalink Layer
The datalink layer is the 2nd layer in the OSI model. This layer processes the bits from the physical layer and prepares them to be sent to the next layer. The basic operation in this layer is physical addressing. The first layer responsible for error checking in the OSI reference model is the "Datalink Layer". 

3.Network Layer
The network layer is the 3rd layer in the OSI model. The network layer is responsible for delivering the data to the destination logical address (IP Address). The basic operation in this layer is logical addressing. 

4.Transport Layer
The transport layer is the 4th layer in the OSI model. The transport layer is responsible for transmission security. This layer provides many additional controls for error-free transmission of data and thanks to these controls, data transmission is successfully performed. 

5.Session Layer
The session layer is the 5th layer in the OSI model. The session layer is responsible for providing the necessary services for the presentation layer to work. The main operation in this layer is session management. 

6.Presentation Layer
The presentation layer is the 6th layer in the OSI model. The presentation layer is the layer where data is displayed. Two communicating nodes must use a common language for data representation. Thanks to this layer, the agreement is made in the language used. 

7.Application Layer
The Application layer is the 7th and final layer in the OSI model. The application layer is the layer closest to the user and provides access to structures found in the user-level OSI model. 


-- Network Devices --

In a computer network, there are network devices, each responsible for a separate task. Without these components in a computer network, the network cannot fulfill its task. Therefore, knowing the tasks and capabilities of network devices allows for solving problems in the network and understanding security breaches. In this way, a solution is reached by taking quick action. 

Switch
The switch is one of the network devices operating at layer 2 according to the OSI reference model. However, some switches with more manageable features operate at layer 3 according to the OSI reference model. The switch is the interconnection device and is used to connect the nodes that want to connect to the network. Sizes may vary depending on the number of ports on it. 
The switch device transmits the data coming from the source port only to the destination port, so it provides a data transmission that will not adversely affect the network performance. In terms of security, it prevents data belonging to two parties from reaching third parties, thus increasing data security in a way. 

Router
The router is one of the network equipment working at the 3rd layer according to the OSI reference model. The router is a packet routing device with highly advanced features that contains an operating system (IOS - Internetworking Operating System). It is network equipment used by placing it between two computer networks. For example, it is often used in LAN-LAN connections and WAN-LAN connections. The most basic task of the router is packet routing and thanks to this device, the networks are separated from each other (segmentation). In other words, it is one of the devices that separate computer networks from each other. It is a configurable device. 

Hub
The hub is one of the network hardware operating at layer 1 according to the OSI reference model. The hub device, which has a very simple structure, is one of the devices used to connect computers that want to connect to the network. 

Repeater
The repeater is one of the network equipment working at layer 1 according to the OSI reference model. There are only 2 ports on the repeater device. These ports transform the incoming signal into an outgoing signal and transmit it to the destination. It strengthens the weak signals on it and enables it to transmit data to longer distances. It is a device similar to a hub but does not have as many ports as a hub.

Bridge
The bridge is one of the network hardware running at layer 2 according to the OSI reference model. The bridge performs packet routing by connecting two computer networks. Although it has a similar task to a router, it is a very simple device with fewer ports than a router. It is also separated from the router by working at the 2nd layer. The bridge can be used in LAN-to-LAN connections.

Modem
Modems are generally small-sized network equipment in which the features of some devices such as switches are gathered together. It contains a small operating system. It is generally used in home networks to access the internet environment. It may have one or more ports on it. In addition, it is possible to provide an internet connection by using wireless devices together with the modem in wireless supported modems.

Firewall
A firewall is one of the network equipment running at layer 4 according to the OSI reference model. A firewall is vital to network hardware located between the internet, which is considered an insecure network, and the existing network. The task of the firewall, which is one of the basic network equipment necessary to ensure the security of the network, is to block or allow traffic according to certain rules. Although there are many types, the most commonly used and known type of firewall is hardware network firewall devices. Having a firewall device alone is not enough to protect the network against external threats. Because attackers can even infiltrate networks with firewalls. The firewall must be configured correctly. Incomplete and incorrect firewall configurations can negatively affect network performance, as well as cause security vulnerabilities. 

Gateway
Gateway is one of the network equipment that can work at every layer according to the OSI model. The gateway is a network component that provides inter-network communication located between two networks. In other words, it connects networks. Although it is similar to router devices in terms of its function, it differs from routers with its ability to work in every layer. In addition, there are not only hardware but also software gateway types. Gateways are a gateway for other nodes in the network. Through this device, they can go out of the network and communicate with a node in another network.


-- TCP/IP Model --

What is the TCP/IP Model?
The TCP/IP model was designed and developed by the Department of Defense (DoD) in the 1960s. When the TCP/IP model was introduced, there was no model that set the standards in computer network communication yet. With this model, it was determined how the network communication should be on the basis of the internet. The TCP/IP model has a layered architecture and consists of 4 layers: 

1. Application Layer
2. Transport Layer
3. Internet Layer
4. Network Access Layer

Network Access Layer
The network access layer is the 1st layer in the TCP/IP model. It corresponds to layers 1 and 2 in the OSI reference model. This layer includes physical accesses and hardware controls. 

Internet Layer
The Internet layer is the 2nd layer in the TCP/IP model. It has similar functions as layer 3 in the OSI reference model. In this layer, network communication functions are performed by logical addressing. 

Transport Layer
The transport layer is the 3rd layer in TCP/IP model. It has similar functions as layer 4 in the OSI reference model. In this layer, data transmission is made and the reliability of the communication is ensured. Whether the data is transmitted correctly without corruption is managed in this layer. 

Application Layer
The Application layer is the 4th and final layer in the TCP/IP model. It is a layer that covers all the operations performed in layers 5, 6, and 7 in the OSI reference model. Application-level controls and operations are executed in this layer. 

OSI Model vs. TCP/IP Model
Although the OSI reference model and the TCP/IP model are very similar models, they differ from each other on some points. When the TCP/IP model first emerged, it emerged out of necessity, not aiming to be a standard. The OSI reference model, on the other hand, aimed to design the ideal network communication, which should be in theory, including its practical use. The TCP/IP model was developed based on some protocols. The OSI model, on the other hand, was not developed on any protocol.


-- IP Addressing Mechanism --

While creating TCP/IP computer networks, a logical address (IP Address) must first be assigned to each device in the network. These assignment processes are called "IP Addressing Mechanism". If an IP address is not assigned to a device in the network, it cannot communicate with devices inside or outside the network. 

What is an IP Address?
IP Address is the ID of the device's network address. Connection operations are performed using IP addresses. IP addresses are divided into IPv4 and IPv6. Examples of both types of IP addresses are the following IP addresses: 

● IPv4: 192.168.4.1
● IPv6: 2001:0db8:85a3:0000:0000:8a2e:0370:7334

Structure of IP Address
The IP address consists of 4 bytes (32 bits). A period is placed between each byte and is expressed in decimal notation.

11000000 10101000 00000001 00000001

11000000 (1st octet)
10101000 (2nd octet)
00000001 (3rd octet)
00000001 (4th octet)

1st Octet: 11000000
=(1×27)+(1×26)+(0×25)+(0×24)+(0×23)+(0×22)+(0×21)+(0×20)=128+64+0+0+0+0+0+0=192
=(1×27)+(1×26)+(0×25)+(0×24)+(0×23)+(0×22)+(0×21)+(0×20)=128+64+0+0+0+0+0+0=192

2nd Octet: 10101000
=(1×27)+(0×26)+(1×25)+(0×24)+(1×23)+(0×22)+(0×21)+(0×20)=128+0+32+0+8+0+0+0=168
=(1×27)+(0×26)+(1×25)+(0×24)+(1×23)+(0×22)+(0×21)+(0×20)=128+0+32+0+8+0+0+0=168

3rd Octet: 00000001
=(0×27)+(0×26)+(0×25)+(0×24)+(0×23)+(0×22)+(0×21)+(1×20)=0+0+0+0+0+0+0+1=1
=(0×27)+(0×26)+(0×25)+(0×24)+(0×23)+(0×22)+(0×21)+(1×20)=0+0+0+0+0+0+0+1=1

4th Octet: 00000001
=(0×27)+(0×26)+(0×25)+(0×24)+(0×23)+(0×22)+(0×21)+(1×20)=0+0+0+0+0+0+0+1=1
=(0×27)+(0×26)+(0×25)+(0×24)+(0×23)+(0×22)+(0×21)+(1×20)=0+0+0+0+0+0+0+1=1

Combine Decimals: Place a period (.) between the decimal values: 192.168.1.1

Classes of IP Address
IP addresses are divided into 5 classes. In order to learn the class of the IP address, the first byte of the IP address is checked. According to the decimal value of the first byte, it is understood which of the classes the IP address belongs to in 

Class	  First Byte Range (Decimal)	Binary Prefix	  Use
A	      0–127	                      0xxxxxxx	      Large networks
B	      128–191	                    10xxxxxx	      Medium-sized networks
C	      192–223	                    110xxxxx	      Small networks
D	      224–239	                    1110xxxx	      Multicast
E	      240–255	                    1111xxxx	      Experimental

It is possible to find out which network the device with that IP address is included in via its IP address. In order to learn this information, first of all, it should be known which class the IP address belongs to. Then, the “Network Bits” fields in the table below are checked. 

For example, let's find out which class the IP address "192.168.4.1" belongs to and which bytes are the network bits: 

Step 1: Check the decimal value of the first byte: "192"
Step 2: According to the table, it is learned which class the value “192” belongs to: “Class C”
Step 3: According to the table, it is checked which bytes of an IP address belonging to the "C" class belong to the network bits: "first 3 bytes"

According to the information we have obtained, it can be said that the IP addresses with the same first 3 bytes belong to the devices in the same network. For example, the IP address “192.168.4.1” and the IP Address “192.168.4.2” are on the same network. Because there is a change only on the byte where the host bits are located. Network bits have the same value: 192.168.4.X 

What is IPv6?
Today, the number of devices connected to the internet network is quite high. Considering that all these devices have an IP address, IPv4 is no longer sufficient. For this reason, some technologies (NAT) and IPv6 have been developed to solve this problem. With IPv6, the use of IPv4, which has a limited number of addresses, has begun to decline and leaves its place to IPv6.

Private IP Addresses
Some of the IP addresses are reserved for special purposes. These reserved IP addresses are IP addresses used in private networks. Private networks are networks that are not directly connected to the Internet and are connected to the Internet with an intermediary network device. For example, home networks and on-premises networks. In-home networks, the modem device provides a connection to the Internet and manages the packet flow. The modem device has a network interface facing the home network and a network interface facing the internet side. The part called the private network is the part where the home network interface of the modem device is located. The IP addresses of the devices in this section are reserved IP addresses that are not used in the internet environment.

Class	Private   IP Range	                      Subnet Mask	            Purpose
A	              10.0.0.0 – 10.255.255.255	      255.0.0.0 (8 bits)	    Large private networks
B	              172.16.0.0 – 172.31.255.255	    255.240.0.0 (12 bits)	  Medium-sized private networks
C	              192.168.0.0 – 192.168.255.255	  255.255.0.0 (16 bits)	  Small private networks

What is a Localhost?
Localhost is the IP address range that specifies the device's own network address. It is used to access services running locally on the device. It is commonly known as the "127.0.0.1" IP address. However, any IP address in the range “127.0.0.1 - 127.255.255.255” can be used for this purpose. Another name is the "loopback" address. 


-- Network Address Translation  --

Network Address Translation(NAT) is a method that converts private IP addresses to public IP addresses. Since private IP addresses are non-routing IP addresses, these IP addresses cannot be used on the internet. These IP addresses allow communication in the local network only. Thanks to NAT, limited IPv4 addresses are used more sparingly. In addition, a kind of network segmentation is provided thanks to NAT. It is beneficial in controlling and securing the connections coming from outside the network into the network. In order to use the NAT method, a device with a gateway must perform packet routing. This device has a NAT table and IP address conversions are performed by looking at this table. 

NAT Advantages and Disadvantages
Although NAT is often used as a solution to running out of IPv4 addresses, it also has some disadvantages. 

Example of NAT
When the device with an IP address of 10.6.1.2 goes to the Internet, it must first transmit the packet to the gateway device that provides the Internet output. The gateway device receiving the packet determines the network to which it will forward the packet and the destination address by looking at the information fields in the packet. After seeing that it has an IP address belonging to the Internet, it makes changes to the packet by using the information in the NAT table, in other words, it performs NAT conversion. After conversion, it forwards the packet to the next network device to forward the packet to the destination IP address. When the incoming response packet arrives, it redirects the packet to the relevant device in the internal network by performing the reverse of similar operations, and packet transmissions are performed together with NAT transformations. 


-- Basic Concepts --

Unicast
"Unicast" is transmitting network packets to a single destination in the network. If a single system transmits network packets to a single destination it is called Unicast.

Multicast
"Multicast" is transmitting network packets to a multiple destinations within the same network.

Broadcast
"Broadcast" is when a device in the network transmits network packets to all devices in the network.

Broadcast Domain
"Broadcast domain" refers to each separate network, usually separated by routers. Broadcast domains refer to the areas that broadcast messages can reach. Switches can also be used with some configurations (VLANs) to specify broadcast domains.
Note: VLAN will be covered later in the training.

Collision Domain
"Collision domain" are usually much smaller domains than broadcast domains. Collision domains are areas that can cause collisions between packets using the same data path. For example, since packets coming from one port of the hub are sent to all other ports, all ports of the hub device as a whole form a collision domain. On the other hand the switches are a little different. Since the switches transmits target-oriented packets each port of the switches creates a separate collision domain.

Subnet Mask
What is Subnet Mask?
Subnet mask is an address used to detect network addresses and to separate networks into subnets. While assigning IP address to every single device in the network subnet mask assignment should also be made because devices cannot find network addresses without subnet mask. If the network address cannot be found it is not possible to transmit packets. In short, communication between devices can’t be established. The subnet mask is 4 bytes long, just like the IPv4 address, and is expressed in decimal notation. For example, the following is a subnet mask:
Example Subnet Mask : 255.255.255.0

Default Subnet Masks
Subnet masks have a default value for each IP address class:

Class A:
Default Subnet Mask: 255.0.0.0
Prefix Form: /8

Class B:
Default Subnet Mask: 255.255.0.0
Prefix Form: /16

Class C:
Default Subnet Mask: 255.255.255.0
Prefix Form: /24

The table shows the default subnet masks for each IP address class. Another representation of subnet masks is the "prefix" representation. In prefix notation, the number of “1” bits in the subnet mask is specified. These “1” bits are in left-to-right order. In prefix notation, the number of bits is written with the “/” sign. For example, the binary representation of the “/8” subnet mask is as follows: 
/8 = 11111111.00000000.00000000.00000000
In this example, the 8 bits from the left of the 32 bits representing the subnet mask shows the "1" bit, and all the remaining bits shows the "0" bit.
All subnet masks and prefix representations are shown in the table below:

Bitwise AND Operation
AND is one of the operations performed on the bits. The results of AND operations on the bits are shown in the table below:

A	  B	  A & B
1	  1	    1
1	  0	    0
0	  1	    0
0	  0	    0

Finding the Network Address
Bitwise AND operation is used to determine the network address with the subnet mask. The IP address and the subnet mask are ANDed. The result obtained gives the network address. For example, let's perform an AND operation on an IP address and subnet mask as follows:
IP Address (Decimal) : 192.168.3.100
IP Address (Binary) : 11000000.10101000.00000011.01100100
Subnet Mask (Decimal) : 255.255.255.0
Subnet Mask (Binary) : 11111111.11111111.11111111.00000000


-- Virtual Local Area Network (VLAN) --

What is VLAN?
VLAN is a part of the network structure that provides logical grouping of devices in the network, regardless of the physical state of the devices in the network. With VLAN, each department within the organization can be separated into a separate subnet, and in this way, the devices of each department are located in a different network.

Network segmentation through VLANs can be implemented in many different ways. For example, as you can see in the image above, network segmentation can be implemented by using many switches in large companies. In organizations with fewer devices and departments, network segmentation can be done by configuring VLANs with a single switch.

Features of VLANs
- Since each VLAN is a separate broadcast domain, it contributes positively to network performance.
- Because VLANs provide network segmentation, it brings an additional layer to network security.
- It helps the creation of a flexible and modular network structure.
- Besides the advantages it brings to the network, it is also easy to configure.
- It can reduce network traffic and prevent congestion.
- As it can be configured with only one single switch, there is also support for configuration with multiple switches.
- It saves costs as it does not require additional hardware.
- It simplifies the management of physical devices.
- If the VLAN configurations are not done correctly on the switch, the network may become vulnerable to some attacks (VLAN hopping attacks).


-- Virtual Private Network (VPN) --

What is Virtual Private Network (VPN)?
Virtual Private Network (VPN) is a technology that allows connecting to different networks through remote access. In networks connected using VPN, resources belonging to the network can be used just as if they are physically connected to that network. For example, a person working remotely joins the network by using the VPN service of the company in order to be included in the corporate network of the company he works for. In this way, it can benefit from the services offered by the devices that are physically connected to the corporate network. In addition, it can carry out joint activities on the same network with an employee who has a physical connection to the corporate network.

The structure of VPN
In order to use the VPN, a VPN client application is needed first. The user is included in the remote network by connecting to the VPN server with the VPN client application. While connecting to the VPN server with the VPN client application, authentication processes are applied and a secure connection is ensured. In addition, the network traffic in between is provided in an encrypted way.


-- Network Protocols --

What is Network Protocol?
Network protocol is a set of rules that determine how to format, transmit and receive data transmitted between devices in order to ensure network communication regardless of the structure of network devices. In other words, network protocol is the common language for a flawless communication used by network devices within same network as well as among different networks. Communication between different network devices can only be carried out through the network protocols.
Knowing the structure and operation of network protocols is important in terms of security. For example, knowing the technical details of some important network protocols can be helpful when detecting threats.

Types of Network Protocols
Network protocols can be divided into 3 groups:

Communication Protocols
- Address Resolution Protocol (ARP)
- Internet Protocol (IP)
- Transmission Control Protocol (TCP)
- User Datagram Protocol (UDP)
- Border Gateway Protocol (BGP)
- Dynamic Host Control Protocol (DHCP)

Management Protocols
- Internet Control Message Protocol (ICMP)
- Simple Network Management Protocol (SNMP)
- File Transfer Protocol (FTP)
- Post Office Protocol 3 (POP3)
- Teletype Network (Telnet)

Security Protocols
- Secure Sockets Layer (SSL)
- Transport Layer Security (TLS)

You can find all the network protocols at the following link: https://en.wikipedia.org/wiki/List_of_network_protocols_(OSI_model) 


-- OSI Reference Model --

The OSI reference model is briefly explained in the first part of the network training series. In this section, the OSI reference model will be discussed in more detail.

What is OSI Reference Model?
The Open Systems Interconnection (OSI) reference model was developed by ISO (International Organization for Standardization) to provide network communication between different operating systems in 1984. OSI reference model makes easier to understand network structures.

Data Flow in the OSI Model
The OSI Model has a hierarchical and layered architecture. The data flow moves in a certain direction between the layers in the OSI model.

Data Encapsulation and Decapsulation
Some header information of the layers is added to the raw data during the data flow in the OSI model as it is needed on the recipient's side. The process of adding header information for each layer next to the raw data coming out of the application is called “encapsulation”. The opposite of this process, which takes place on the sender's side, is also carried out on the recipient's side. Header information for each layer is included in the total data from the application layer to the physical layer. Therefore, on the recipient's side, in the opposite direction (from the physical layer to the application layer), each layer receives its own header information and transmits it to the upper layer it is responsible for. In this way, raw data is obtained and processed within the application.This process is called “decapsulation” on the recipient’s side.

Protocol Data Unit (PDU) in OSI Model
Each layer in the OSI model has a different data set in the encapsulation/decapsulation process. This dataset has special names for some layers

Application Layer: Data
High-level data generated by the application (e.g., HTTP requests, emails, file transfers).

Presentation Layer: Data	
Data translated into a standardized format for the network.

Session Layer: Data
Data managed for maintaining sessions between devices.

Transport Layer: Segment (TCP) or Datagram (UDP)
Data segmented for reliable or unreliable transport. Includes source and destination port numbers.

Network Layer: Packet
Data encapsulated with logical addressing (IP addresses) and routing information.

Data Link Layer: Frame
Data framed with physical MAC addressing for delivery on the same network.

Physical Layer: Bits
Data represented as raw electrical, light, or radio signals for transmission over the medium.


-- Media Access Control (MAC) Address --

What is Network Interface Card?
Network Interface Card is a hardware that ensures establishing and maintaining the network connections and communications in computers. The inbound and outbound network packets in network communications are received/transmitted thanks to Network Interface Cards. There are many types of NIC hardware in various sizes and features. For example, there are NICs that provide Wireless communications. Wi-Fi is a feature that “Wireless NIC” hardware makes available. In short, network communications would not be possible without Network Interface Cards.

What is MAC Address?
The Media Access Control (MAC) address is the physical address required for network communication. IP address and MAC address take part together to provide network communication which cannot be established without either of them available on a device. MAC addresses are placed on NICs during production. Each of the NIC hardware produced has a unique MAC address.

The MAC address is “6 Byte” (48 bit) long and is expressed as Hexadecimal. The address below is an example of a MAC address:
MAC Address : 2C:54:91:88:C9:E3
The first 3 Byte of the MAC address is obtained from the relevant organizations specific to vendors. The last 3 bytes are determined by the vendor. In this way, each MAC address becomes a unique one.

Vendor Detection through MAC Address
You can determine the vendor that the MAC address belongs to using online services. For example, let's apply it on the following address:
MAC Vendors: https://macvendors.com/ 

As you can see on the image above, the vendor information for the requested MAC address displayed successfully.
Another website that can be used for this purpose is https://macaddress.io

It is also possible to find the vendor’s information without using these online services, there are lists for this. For example, in the following page, we can query the first 3 Byte of the MAC address and obtain the vendor information:
MAC Vendors List:  https://gist.github.com/aallan/b4bb86db86079509e6159810ae9bd3e4


-- Address Resolution Protocol (ARP) --

What is Address Resolution Protocol (ARP)?
Address Resolution Protocol (ARP) is a network protocol which works on the datalink layer and has an important role in the communication of devices. The main task of the ARP protocol is to ensure that Logical and Physical addresses are matching with each other and to identify the MAC address of a device with a known IP address.

Working Structure of the ARP Protocol
When two devices in a network start to communicate with each other, the target device’s MAC address and IP address must be known. The ARP protocol helps determine the MAC address of a device with a known IP address.
The device A sends the “ARP Request” (Broadcast) packet to all devices in the network. None of the devices replies back to this request except for the device with the IP address in the ARP Request Packet as they all can see that the IP address in the ARP packet does not belong to any of them. Seeing its own IP address, device B sends its own MAC address through an "ARP Reply" packet to the device sending the ARP Request.

ARP Table
In the previous image, the device A acquired the MAC address of the device C using the ARP protocol. This acquired MAC address is kept in the ARP table on the device A for a certain period of time. Similarly, all devices in the network hold the IP address and MAC address information of other devices in the network in the ARP tables for a certain period of time. Thanks to the ARP tables, it is determined whether the MAC address information of the target device is on the device to send the network packet. As in the examples above, it is a “Dynamic” process to save the MAC address directly in the ARP table by asking the devices in the network directly. Another type of ARP table registration process is the “static” registration process. Necessary 
values in the ARP table are entered manually via the command line to add a static type of record. You can see the type of records when you display the ARP table of the device.

Displaying the ARP Table on Windows
The "arp -a" command is used to see the ARP table on Windows.

Displaying the ARP Table on Linux
The "sudo arp" command is used to see the ARP table on Linux.

ARP Protocol Header
The ARP protocol has its own header structure. As seen in the example below, there are many fields in the header of the protocol. The information of the protocol is included in these fields. 

Field	                Size (Bytes)	  Description
Hardware Type	        2	              Specifies the type of hardware (e.g., Ethernet = 1).
Protocol Type	        2	              Specifies the protocol type being mapped (e.g., IPv4 = 0x0800).
Hardware Size	        1	              Specifies the size of the hardware address (MAC address).
Protocol Size	        1	              Specifies the size of the protocol address (IP address).
Opcode	              2	              Specifies the operation: 1 for request, 2 for reply.
Sender MAC Address	  6	              The MAC address of the sender.
Sender IP Address	    4	              The IP address of the sender.
Target MAC Address	  6	              The MAC address of the target (set to 0 in ARP request).
Target IP Address	    4	              The IP address of the target.

Explanation of Key Fields

- Hardware Type (HTYPE): Indicates the type of link-layer protocol (e.g., Ethernet).
- Protocol Type (PTYPE): Indicates the type of network-layer protocol (e.g., IPv4).
- Hardware Size (HLEN): Size of the MAC address (typically 6 bytes for Ethernet).
- Protocol Size (PLEN): Size of the IP address (typically 4 bytes for IPv4).
- Opcode: Specifies whether the ARP message is a request or a reply.
- Sender/Target MAC and IP: Contains the addresses of the sender and target devices for resolution.

Example ARP Request Header:

Field	                Value	              Explanation
Hardware Type	        0x0001	            Ethernet.
Protocol Type	        0x0800	            IPv4.
Hardware Size	        6	                  MAC address size (6 bytes).
Protocol Size	        4	                  IPv4 address size (4 bytes).
Opcode	              0x0001	            ARP request (1 = Request, 2 = Reply).
Sender MAC Address	  00:0A:95:9D:68:16	  Example sender MAC address.
Sender IP Address	    192.168.1.10	      Example sender IP address.
Target MAC Address	  00:00:00:00:00:00	  Unknown, set to 0 (for ARP request).
Target IP Address	    192.168.1.1	        Example target IP address to resolve.

Hardware Type
The value in Hardware Type field indicates the network type. In other words, it includes the value that shows the protocol in the datalink layer. It is “2 byte” long. For example, the value “0x0001” here in this field indicates that it has “ethernet”.
Note: The value starting with “0x” means “Hexadecimal”.

Protocol Type
The value in the Protocol Type field indicates the value that shows the protocol in the network layer. It is “2 byte” long. For example, the value “0x0800”  here in this field indicates that it is “Internet Protocol” (IP).

Hardware Length
Hardware Length field shows the length of hardware address. It is “1 Byte” long. For example, since the MAC address is used as hardware address for ethernet, the “6” value is included in this field because MAC addresses are 6 byte long.

Protocol Length
Protocol Length field shows the length of the protocol address. It is “1 Byte” long. For example, since the IPv4 address is usually used for the IP protocol, the “4” value is included in this field because IPv4 addresses are “4 byte” long.

Operation Code
Operation Code field is the area where the task of the frame of the ARP protocol. It is “2 byte” long. For example, if there is “1” value in this field, it is an “ARP Request” type and if there is “2” in this field, it is an “ARP Reply” type.

Sender Hardware Address
Sender Hardware is the field with the hardware address of the device that sends the frame. For example, this is the field where the sender’s MAC address is for Ethernet. The length of this area varies according to the protocol. The length of the 'Sender Hardware Address' should be 6 
bytes if the Ethernet protocol is used.

Sender Protocol Address
Sender Protocol Address field is where the sender’s protocol address is. For example, it is the field where the sender’s IP address is written for the IP protocol. The length of this area varies according to the protocol. The length of the 'Sender Protocol Address' should be 4 bytes if the IP protocol is used.

Target Hardware Address
Target Hardware is the field where the hardware address of the device that will receive the frame. For example, it is where the recipient's MAC address is written for Ethernet. The length of this area varies according to the protocol.

Target Protocol Address
Target Protocol Address field is where the Protocol address of the device that will receive the frame. For example, it is the area where the IP address of the recipient for the IP protocol is written. The length of this area varies according to the protocol. 

Reviewing the ARP Protocol with Wireshark
There are some tools with a graphical user interface (GUI) that help reviewing network packets in detail. One of these is “Wireshark”. 


-- Internet Protocol (IP) --

What is the “IP Protocol”?
Internet Protocol is the protocol that ensures the packet transmissions between different networks. It prepares the data to be sent to a top transmission layer.

Features of the IP Protocol
- It performs the process of dividing large packets to be sent under data transmission into smaller pieces (IP Fragmentation).
- There is no flow control mechanism required for reliable transmission.
- It is the most functional structure in the OSI layers.
- The control and security mechanisms belong to the upper layers as the packets it transmit to the upper layer can be easily imitated.
- The Internet Protocol (IP) works using logical addresses.

IP Protocol Header
The IP Protocol includes many fields within the header. The following image shows the header and fields of the IP protocol:

Version
The Version field is where the type of IP packet is defined. It shows whether the IP packet is IPv4 or IPv6 according to the value in this Field. It is “4 bit” long.

Internet Header Length (IHL)
It is the field where the length of the IP header, which may be variable is shown. The smallest IP Packet Header is 20 bytes. It is “4 bit” long.

Types of Service
It is the field where Quality of Service (QoS) parameters are located. It is “8 bits” long.

Total Length
Total Length field refers to IP header and the total length of the data. It is “16 bit” long.

Identification
Identification Field shows the ID number of each IP packet. It is “16 bit” long.

IP Flags
IP Flags is the field that indicates whether IP Fragmentation is implemented on the packet or not. It is “3 bit” long.

Fragmentation Offset
Fragmentation Offset field indicates how many bytes is the fragmented packet is. It is “13 bit” long.

Time to Live (TTL)
Time to Live (TTL) indicates the number of hops that the packet can take. The transmission of the packet from one device to another means “1 hop” and the value in TTL in each hop is reduced by “1”. Packet, which reaches the “0” value, can no longer be transmitted. TTL Field is “8 bit” long.

Protocol
The value in the protocol field indicates the protocol in which the packet is associated in an upper layer. It is “8 bit” long.

Header Checksum
It is the control value calculated to see whether the IP header has been transmitted intact. This value calculated by a specific algorithm is used for verification purposes. It is “16 bit” long.

Source Address
Source Address field is where the IP address that sends the packet. It is “32 bit” long.

Destination Address
Destination Address field is where the recipient's IP address is located. It is “32 bit” long.

Data
Data field is the field where the total data from the lower layer is located.



-- Internet Control Message Protocol (ICMP) --

What is Internet Control Message Protocol (ICMP)?
The ICMP is the protocol that sends the errors, warnings, and control messages during the transmission of packets to the sender device.

Features of the ICMP Protocol
- Works with the IP protocol.
- The ICMP messages are usually created in the following cases:
	- When the IP packets cannot reach their target.
	- When the gateway devices are too busy to transmit packets.
	- When there is a shorter way for the packets to go.
- The ICMP protocol does not make the IP protocol more secure.
- All applications using the IP protocol must support the ICMP protocol.
- Not all of the ICMP messages provide information about error control. Some ICMP messages are used to obtain computer network tests and network information.
- The ICMP protocol produces error messages only for the IP packets. The ICMP protocol does not produce error messages in case of errors related to transmission of ICMP messages.
- ICMP messages do not contain information about what to do to fix the error even though they show the error messages. This is a situation that is determined by the computer that receives the error message.

ICMP Applications

Ping
Ping is an application used to find out if the device in the network is communicated by using ICMP messages. For example, let's apply the ping command on Windows:

C:\>ping -n 1 8.8.8.8

Pinging 8.8.8.8 with 32 bytes of data:
Reply from 8.8.8.8: bytes=32 time=31ms TTL=59

Ping statistics for 8.8.8.8:
    Packets: Sent = 1, Received = 1, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 31ms, Maximum = 31ms, Average = 31ms

C:\>

As shown in the image above, ICMP Ping Request was sent with "1" Packet with the parameter "-n". As we see the reply packet comes back to the sent packet there is a network communication with the target address.
Note: In some networks, ICMP messages are blocked through the firewall configurations in terms of security. Therefore, there will be no response to the Ping command in such a network, but the network communication should still be ongoing with the target device.

Traceroute
Traceroute is an application used to determine the route that the packets follow until they reach to their destinations. All the details of the roadmap that the packets follow are revealed through this application. For example, let's see the application on Windows:

C:\>tracert google.com

Tracing route to google.com [2a00:1450:4001:80b::200e]
over a maximum of 30 hops:

  1     4 ms    12 ms     8 ms  fritz.box [2a02:8071:60e0:a940:d624:ddff:fede:5fd]
  2    18 ms    16 ms    14 ms  2a02:908:f000:a4::d6
  3    31 ms    17 ms   108 ms  7211a-mx960-01-ae10-2068.gie.unity-media.net [2a02:908:0:3f8::1]
  4     *        *        *     Request timed out.
  5     *        *        *     Request timed out.
  6    50 ms    26 ms    24 ms  2a00:1450:8154::1
  7    37 ms    82 ms    45 ms  2001:4860:0:1::500c
  8    27 ms    35 ms    25 ms  2001:4860:0:1::157f
  9    21 ms    32 ms    21 ms  fra15s28-in-x0e.1e100.net [2a00:1450:4001:80b::200e]

Trace complete.

C:\>

As shown in the image above, the IP addresses of the network devices which are passed until reaching to "Google.com" have been displayed successfully through the "Tracert" command.


-- Routing --

What is Routing?
The transmission from a network to different networks and the determination of the transmission path is named “routing”. Routers are the devices with the main task of routing. There are at least 2 network interfaces on router devices.

Routing Table
The routing table is where the information of the routes that network  may go on the devices. The devices use these tables in routing. For example, let's see the routing table for IPv4 on Windows:

C:\>route print -4
===========================================================================
Interface List
  6...4c 56 df 1e fc 09 ......Realtek USB GbE Family Controller #2
 69...00 15 5d 30 01 00 ......Hyper-V Virtual Ethernet Adapter
 15...04 bf 1b 20 5d 20 ......Killer E2600 Gigabit Ethernet Controller
  8...0a 00 27 00 00 08 ......VirtualBox Host-Only Ethernet Adapter
  7...00 ff 43 16 74 29 ......Phantom TAP-Windows Adapter V9
  9...c4 75 ab be 48 e0 ......Microsoft Wi-Fi Direct Virtual Adapter
 22...c6 75 ab be 48 df ......Microsoft Wi-Fi Direct Virtual Adapter #2
 25...00 50 56 c0 00 01 ......VMware Virtual Ethernet Adapter for VMnet1
 18...00 50 56 c0 00 08 ......VMware Virtual Ethernet Adapter for VMnet8
 21...c4 75 ab be 48 df ......Intel(R) Wi-Fi 6 AX201 160MHz
  1...........................Software Loopback Interface 1
===========================================================================

IPv4 Route Table
===========================================================================
Active Routes:
Network Destination        Netmask          Gateway       Interface  Metric
          0.0.0.0          0.0.0.0    192.168.199.1   192.168.199.24     50
        127.0.0.0        255.0.0.0         On-link         127.0.0.1    331
        127.0.0.1  255.255.255.255         On-link         127.0.0.1    331
  127.255.255.255  255.255.255.255         On-link         127.0.0.1    331
      169.254.0.0      255.255.0.0         On-link   169.254.213.147    281
  169.254.213.147  255.255.255.255         On-link   169.254.213.147    281
  169.254.255.255  255.255.255.255         On-link   169.254.213.147    281
     172.19.192.0    255.255.240.0         On-link      172.19.192.1    271
     172.19.192.1  255.255.255.255         On-link      172.19.192.1    271
   172.19.207.255  255.255.255.255         On-link      172.19.192.1    271
     192.168.42.0    255.255.255.0         On-link      192.168.42.1    291
     192.168.42.1  255.255.255.255         On-link      192.168.42.1    291
   192.168.42.255  255.255.255.255         On-link      192.168.42.1    291
     192.168.48.0    255.255.255.0         On-link      192.168.48.1    291
     192.168.48.1  255.255.255.255         On-link      192.168.48.1    291
   192.168.48.255  255.255.255.255         On-link      192.168.48.1    291
    192.168.199.0    255.255.255.0         On-link    192.168.199.24    306
   192.168.199.24  255.255.255.255         On-link    192.168.199.24    306
  192.168.199.255  255.255.255.255         On-link    192.168.199.24    306
        224.0.0.0        240.0.0.0         On-link         127.0.0.1    331
        224.0.0.0        240.0.0.0         On-link   169.254.213.147    281
        224.0.0.0        240.0.0.0         On-link    192.168.199.24    306
        224.0.0.0        240.0.0.0         On-link      172.19.192.1    271
        224.0.0.0        240.0.0.0         On-link      192.168.42.1    291
        224.0.0.0        240.0.0.0         On-link      192.168.48.1    291
  255.255.255.255  255.255.255.255         On-link         127.0.0.1    331
  255.255.255.255  255.255.255.255         On-link   169.254.213.147    281
  255.255.255.255  255.255.255.255         On-link    192.168.199.24    306
  255.255.255.255  255.255.255.255         On-link      172.19.192.1    271
  255.255.255.255  255.255.255.255         On-link      192.168.42.1    291
  255.255.255.255  255.255.255.255         On-link      192.168.48.1    291
===========================================================================
Persistent Routes:
  None

C:\>

As shown in the image above, the routing table has been displayed successfully with the “route PRINT -4” command.

Types of Routing
There are 3 different types of Routing

Static Routing
Static Routing is network administrators’ manual routing entries that allows a fixed route to be added into the routing tables. This record will never change over time. The change can happen only if the network manager makes changes to the routing tables.

Dynamic Routing
Contrary to Static Routing, Dynamic Routing is the routing type that can vary depending on time and situation. There are routing protocols in charge of managing the Dynamic Routing.

Default Routing
Devices that determine that other routes are not suitable for themselves use default routing. Also, default routing is added to the routing table when there is only one direction in communication.

IP Routing Algorithm
The devices in communication must make certain decisions in order for the packets to be transmitted. It should be known by the device which packet will go to which destination. One of the most important mechanisms that ensures this is the IP Routing Algorithm. IP Routing Algorithm basically works as follows:
1. The target IP address information is obtained through the incoming IP packet.
2. It is determined by calculating the network address which network the obtained IP address information belongs to.
3. If the network address is indeed the network located in the device, it means it is the MAC address of the target and communication is carried out.
4. If the network address shows an address other than the network located in the device, it is determined which device the packet is to be sent by analyzing the routing table.
5. If there is no appropriate route on the routing table the packet is sent to the Default Gateway.
6. If the packet transmission to the Default Gateway does not occur, ICMP error message is produced.

Routing Protocols
There are routing protocols with many different algorithms. Different routing protocols can be used on routers if needed. Below are some routing protocols:
- RIP (Routing Information Protocol)
- OSPF (Open Shortest Path First)
- IGRP (Interior Gateway Routing Protocol)
- EIGRP (Enhanced Interior Gateway Routing Protocol)

